## Η τεκμηρίωση του έργου

Στη παρόν αναπτύσσονται τα εξής:

**--** Η εγκατάσταση ελέυθερων και ανοικτών λογισμικών απαραίτητων για το προγραμματισμό στο περιβάλλον οπτικού προγραμματισμού Scratch 2.0 με την επέκταση s2aio για τον προγραμματισμό του Arduino

**--** Η παρουσίαση μέρους από τις δραστηριότητες που υλοποίησαν οι μαθητές για την προετοιμασία τους (περιλαμβάνονται και οι απαντήσεις που έδωσαν) ώστε να επιτευχθούν οι εκπαιδευτικοί στόχοι και τελικά να υλοποιήσουν το προτεινόμενο παιχνίδι τους.


### Περιγραφή παιχνιδιού ArduPlane

Η πρότασή μας περιλαμβάνει τη δημιουργία/προγράμματος παιχνιδιού (σε προγραμματιστικό περιβάλλον Scratch 2.00) καθώς και αντίστοιχου χειριστηρίου μέσω του οποίου θα παίζεται το παιχνίδι (με χρήση Arduino uno). Το παιχνίδι περιλαμβάνει αεροπλάνο το οποίο θα κινείται δεξιά αριστερά στη σκηνή με τη περιστροφή του **ποτενσιομέτρου** το οποίο θα υπάρχει στο κύκλωμα του χειριστηρίου. Στόχος μας είναι η αποφυγή της σύγκρουσης με εχθρικό αεροπλάνο που έρχεται από την αντίθετη κατεύθυνση. Κατά την έναρξη του παιχνιδιού στο χειριστήριο θα είναι αναμμένα **τρία λαμπάκια (leds)** που δείχνουν ότι έχουμε τρεις ζωές. Με απώλεια κάθε ζωής (σύγκρουση με εχθρικό αεροπλάνο) θα σβήνει και από ένα λαμπάκι στο χειριστήριο ενώ παράλληλα θα ακούγεται και ήχος από **piezo buzzer**. Όταν σβήσουν όλα τα λαμπάκια (απώλεια όλων των ζωών) το παιχνίδι θα τερματίζεται. Στο χειριστήριο επιπλέον θα υπάρχουν δύο πλήκτρα (buttons): 

• με πάτημα στο ένα **πλήκτρο (button1)** θα μπορεί το αεροπλάνο μας να πυροβολεί προς το εχθρικό αεροπλάνο και όταν τα πυρά μας το πετυχαίνουν θα κερδίζουμε 20 πόντους οπότε το σκορ μας θα αυξάνεται 

• με πάτημα στο δεύτερο **πλήκτρο (button2)** θα αυξάνεται ο βαθμός δυσκολίας του παιχνιδιού με εμφάνιση δύο εχθρικών αεροπλάνων ταυτόχρονα σε διαφορετικό σκηνικό.

Τι θα χρειασθούμε για την υλοποίηση του έργου μας:

### Υλικά

Για το κύκλωμα του χειριστηρίου,απαιτούνται τα εξής υλικά (για δημιουργία του προτοτύπου σε Breadboard):

**• 1 board Arduino uno/ Arduino nano**

**• 1 Breadboard για τη δημιουργία κυκλώματος / διάτρητη πλακέτα**

**• 3 Αντιστάσεις 220 Ω**

**• 2 Αντιστάσεις 10 ΚΩ**

**• 3 κόκκινα leds (5mm)**

**• 1 περιστροφικό ποτενσιόμετρο**

**• 2 buttons (διακόπτες)**

**• 1 piezo buzzer**

**Παρατήρηση:** Στην ολοκληρωμένη κατασκευή του το χειριστήριο υλοποιείται με χρήση διάτρητης πλακέτας (αντί Breadboard) με Arduino Nano αντι Arduino Uno και περιέχεται σε ανάλογο για τη χρήση του κουτί.

### Απαιτούμενο Λογισμικό
Το Arduino uno του παραπάνω κυκλώματος συνδέεται στη usb θύρα υπολογιστή (με λειτουργικό σύστημα κατά προτίμηση linux Ubuntu/ελεύθερο και ανοικτό λογισμικό) στον οποίο είναι εγκατεστημένο το περιβάλλον οπτικού προγραμματισμού Scratch 2.0 με την επέκταση s2aio, και στο οποίο θα έχει φορτωθεί το προς εκτέλεση πρόγραμμα του παιχνιδιού.

## Η Εγκατάσταση του απαιτούμενου Λογισμικού για το προγραμματισμό του παιχνιδιού Arduplane

O προγραμματισμός του παιχνιδιού και του Arduino γίνεται στο περιβάλλον οπτικού προγραμματισμού Scratch 2.0 με την επέκταση s2aio.
Παρακάτω περιγράφεται αναλυτικά η διαδικασία για την εγκατάστασή του.

### Η επέκταση s2aio για τον επεξεργαστή εκτός σύνδεσης (Offline Editor) του προγραμματιστικού περιβάλλοντος Scratch 2.0

Με την **επέκταση s2aio** μπορούμε να προγραμματίσουμε, να ελέγξουμε και να παρακολουθήσουμε το Arduino (board) χρησιμοποιώντας το περιβάλλον οπτικού προγραμματιστικού Scratch 2.0 χωρίς να χρειάζεται να μάθουμε τη C. Περιλαμβάνει ένα σύνολο εντολών προγραμματισμού (μπλοκ) σε πολλές γλώσσες μεταξύ των οποίων και την Ελληνική. .
Η επέκταση έχει τα παρακάτω χαρακτηριστικά:

    • Είναι γραμμένη σε Python χρησιμοποιώντας τη νέα βιβλιοθήκη Python 3.5 asyncio.
   
    • Εγκαθίσταται σε Windows, Mac και Linux (συμπεριλαμβανομένου του Raspberry Pi Debian).
    
    • Είναι εύκολη στην εγκατάσταση.
    
    • Και εύχρηστη.

### H Εγκατάσταση της επέκτασης s2aio (για windows 7)

Πριν εγκαταστήσετε **την επέκταση s2aio** απαιτούνται οι παρακάτω ενέργειες:

    • Εγκατάσταση **Python 3.5**

    • Εγκατάσταση του **IDE του Arduino**

    • Εγκατάσταση του λογισμικού **FirmataPlus** στο Arduino σας – ΑΠΑΙΤΕΙΤΑΙ!

    • Εγκατάσταση του προγραμματιστικού περιβάλλοντος **Scratch 2.0 (offline Editor)**


### Εγκατάσταση Python 3.5

Για να εγκαταστήσετε το Python 3.5, μεταβείτε στην αρχική σελίδα της Python και κάντε λήψη της διανομής 3.5 για το λειτουργικό σας σύστημα.Εάν έχετε εγκατεστημένη τη Python 2.7, δεν χρειάζεται να την αφαιρέσετε. Πρέπει οπωσδήποτε να χρησιμοποιήσετε τη Python 3.5 για να εκτελέσετε s2aio.
![Github Robuino](/images/1.png)

Κατά τη διάρκεια της διαδικασίας εγκατάστασης, όπως φαίνεται και στο παραπάνω παράθυρο (περιβάλλον windows) υπάρχουν δύο πλαίσια ελέγχου όπως αυτό για να προσθέσουμε τη Python 3.5 στη διαδρομή (path), βεβαιωθείτε ότι τα έχετε επιλέξει (τσεκάρει) πριν προχωρήσετε στην εγκατάσταση.  Μετά την εγκατάσταση, ανοίξτε ένα παράθυρο εντολών και πληκτρολογήστε: python -V. Θα πρέπει να δείτε Python 3.5.0 ή κάτι παρόμοιο.


### Εγκατάσταση του IDE του Arduino

Εγκαταστήστε την τελευταία έκδοση του αρχείου **Arduino IDE** από τη σελίδα λήψης του Arduino. Κατά την εγκατάσταση, μπορεί να σας ζητηθεί να φορτώσετε ένα πρόγραμμα οδήγησης για σύνδεση USB / σειριακής επικοινωνίας. Φορτώστε το πρόγραμμα οδήγησης.

Μετά την εγκατάσταση, συνδέστε το Arduino στον υπολογιστή σας με το καλώδιο USB.

Ανοίξτε το IDE και από το μενού Εργαλεία, επιλέξτε τον τύπο του Arduino (board) που έχετε και τη θύρα.

Στη συνέχεια, από το μενού **Αρχείο / Παραδείγματα / 01.Basics**, επιλέξτε το πρόγραμμα Blink και μεταφορτώστε το στο Arduino. Έτσι επαληθεύουμε ότι μπορούμε να επικοινωνήσουμε με το Arduino.

Ένα χρήσιμο βίντεο για τα παραπάνω που αφορούν την εγκατάσταση και τον έλεγχο του IDE μπορείτε να δείτε στη παρακάτω διεύθυνση:

https://www.youtube.com/watch?time_continue=313&v=5YDsX6zZ3b4 

Μόλις αυτό είναι επιτυχές, μεταφορτώστε το **StandardFirmata** (που παρέχεται με το IDE του Arduino) ή το **FirmataPlus**. 
**Το FirmataPlus πρέπει οπωσδήποτε να φορτωθεί στο Arduino για να μπορείτε να χρησιμοποιήσετε είτε τις ιδιότητες σόναρ ή ήχου του s2aio.**


### Μεταφόρτωση του FirmataPlus στο Arduino

Το **FirmataPlus** είναι μια βελτιωμένη έκδοση του StandardFirmata που περιλαμβάνεται σε αυτή τη διανομή.
**ΠΡΟΣΟΧΗ:** Το FirmataPlus είναι διαφορετικό από το StandardFirmataPlus. Το StandardFirmataPlus δεν θα λειτουργήσει σωστά.
Το FirmataPlus παρέχει υποστήριξη για:

    • HC-SR04 συσκευές εντοπισμού απόστασης (Sonar)
    
    • Υποστήριξη μοτέρ (Stepper Motor )
    
    • Γεννήτρια τόνων
    
Για όσους χρησιμοποιούν τις πλακέτες Leonardo και Mega 2560 , θα χρειασθεί να μεταφορτώσουν το FirmataPlus32u4 αντί για το FirmataPlus.
Το FirmataPlus διανέμεται ως αρχείο zip. Αν έχετε κατεβάσει την διανομή pyamta_aio από το Github και έχετε εξάγει τα αρχεία, θα βρείτε ένα αρχείο libraries.zip στον κατάλογο του FirmataPlus. Μπορείτε επίσης να το κατεβάσετε απευθείας από 
https://github.com/MrYsLab/pymata-aio/blob/master/FirmataPlus/libraries.zip . 

Κάντε κλικ στο κουμπί **"view raw"** για λήψη.

Ανοίξτε το IDE του Arduino και επιλέξτε Αρχείο / Προτιμήσεις για να καθορίσετε τη θέση του προγράμματος.

![Github Robuino](/images/2.jpg)

Κλείστε το IDE του Arduino και εξαγάγετε το αρχείο **libraries.zip** στον κατάλογο τοποθεσίας **sketchbook**.
Ανοίξτε ξανά το IDE του Arduino, επιλέξτε **Αρχείο / Παραδείγματα / FirmataPlus / FiramataPlus** και μεταφορτώστε το στο Arduino.

![Github Robuino](/images/3.jpg)

Εάν βλέπετε προειδοποιήσεις κατά την φόρτωση του **FirmataPlus** στο IDE του Arduino, βεβαιωθείτε ότι έχετε ρυθμίσει το επίπεδο προειδοποιήσεων μεταγλωττιστή στο "Default" στην οθόνη **Αρχείο / Προτιμήσεις**. Εάν εξακολουθείτε να βλέπετε τις προειδοποιήσεις, πάρτε το τελευταίο αντίγραφο του libraries.zip και εγκαταστήστε το ξανά.

### Εγκατάσταση του προγραμματιστικού περιβάλλοντος Scratch 2.0  (Offline Editor)

Για χρήστες Windows και Mac, μεταβείτε στη σελίδα λήψης του Scratch και ακολουθήστε τις οδηγίες εγκατάστασης για το λειτουργικό σας σύστημα.

### Εγκατάσταση του s2aio

Βεβαιωθείτε ότι διαθέτετε σύνδεση στο διαδίκτυο. Για χρήστες των Windows, ανοίξτε ένα παράθυρο εντολών και πληκτρολογήστε:

**pip install s2aio**


Κατά την εγκατάσταση, αποδεχτείτε την προεπιλεγμένη θέση εγκατάστασης.

### Ξεκινώντας s2aio

Η εντολή **s2aio** δέχεται τις ακόλουθες επιλογές:


**s2aio** [-h] [-c CLIENT] [-L LANGUAGE] [-p COMPORT] [-b BASE_PATH] [-s SLEEPER] [-v] [-r RPI]


για τα προαιρετικά ορίσματα:


    • -h, --help δείχνουν αυτό το μήνυμα βοήθειας και έξοδο

    • -c CLIENT προεπιλογή = scratch [scratch | snap | no_client]

    • -l LANGUAGE 1 = Αγγλικά (προεπιλογή) 2 = Κινέζικα (zh-CN) 3 = Κινέζικα (zh-TW) 4 = Ολλανδικά (NL) 5 = Γαλλικά (FR) 6 = Γερμανικά (DE) 7 =Ελληνικά (GR)  8=Κορεατικά (KO)  9 = Ιταλικά (ΙΤ) 10 = Πορτογαλικά (PT) 11 = Ισπανικά (ES)

    • -p COMORT Arduino θύρα COM - π.χ. / dev / ttyACMO ή COM3

    • -b BASE_PATH Διαδρομή αρχείου Python - π.χ. /usr/local/lib/python3.5/dist-pakages/ s2aio

    • -s SLEEPER Ρύθμιση χρονικού ορίου για να επιτραπεί η αρχικοποίηση του Scratch.

    • -v έκδοση εκτύπωσης και διαδρομή Python

    • -r RPI Ρυθμίστε σε TRUE όταν προκειται για Raspberry Pi

      
**ΠΡΟΣΟΧΗ:** Η επιλογή γλώσσας είναι διαθέσιμη μόνο για το Scratch.

Για εκτέλεση με χρήση της Ελληνικής γλώσσας και επικοινωνία με Arduino στη COM4, στο παράθυρο εντολών πληκτρολογούμε:

**s2aio  -p com4 -l 7**

οπότε, εμφανίζεται το παράθυρο του **Scratch 2 Offline Editor** στο οποίο με πάτημα στις **“Άλλες εντολές”** βλέπουμε το παρακάτω παράθυρο που περιλαμβάνει τις εντολές της επέκτασης s2aio.

![Github Robuino](/images/4.png)


**Η παραπάνω περιγραφόμενη διαδικασία που ακολουθήσαμε για την εγκατάσταση της επέκτασης s2aio σε windows 7,  ακολουθείται αναλόγως και για την εγκατάσταση σε linux ubuntu αλλά και σε Raspbian για Raspberry Pi.**


## Προετοιμασία Ομάδας
Οι ομάδα μας με την εφαρμογή κατάλληλων φύλλων εργασίας προσέγγισε το βασικό υλικό για το Arduino, μελέτησε και εφάρμοσε τις εντολές της επέκτασης s2aio υλοποιώντας δραστηριότητες με χρήση φωτοδιόδων (leds), διακοπτών, ποτενσιομέτρου, buzzer, κ.ά. 
Όσον αφορά το προγραμματιστικό τμήμα του έργου, οι μαθητές, ήταν ήδη εξοικειωμένοι με το περιβάλλον του Scratch 2.0. στο οποίο είχαν αναπτύξει αρκετές δραστηριότητες κατά την διδασκαλία του μαθήματος της Πληροφορικής. 
Τα μέλη της ομάδας, ήδη είχαν προσεγγίσει τις βασικές έννοιες του ηλεκτρισμού και της δημιουργίας απλών ηλεκτρικών κυκλωμάτων, στο μάθημα της Φυσικής. 
Ο ρόλος των εκπαιδευτικών υπήρξε  συντονιστικός και καθοδηγητικός φρόντισαν να μην δίνουν έτοιμες απαντήσεις, να ωθούν τους μαθητές στην έρευνα και τον προβληματισμό και εκτός της σχολικής αίθουσας, αλλά και να δημιουργούν κατάλληλες μαθησιακές καταστάσεις και προβληματισμούς εντός αυτής, ώστε οι ίδιοι οι μαθητές ν’ ανακαλύπτουν και να καταλήγουν στις λύσεις.
Παρακάτω παρουσιάζεται με σύντομο τρόπο ένα μέρος απ' αυτό το εκπαιδευτικό υλικό (οι δραστηριότητες και οι απαντήσεις που δόθηκαν) με το οποίο προετοιμάσθηκε η ομάδα ώστε τα μέλη της να οικοδομήσουν τις απαραίτητες γνώσεις και ν’ αποκτήσουν τις κατάλληλες δεξιότητες που τους οδήγησαν τελικά στην υλοποίηση του παιχνιδιού **ArduPlane**.

### Το Arduino 
Το Arduino είναι μια ηλεκτρονική πλατφόρμα ανοικτού κώδικα και σχεδιασμού, που αποτελείται από ένα board που χρησιμοποιεί μικροελεγκτή, το οποίο μας δίνει ένα αριθμό ακίδων **(pins)**  οι οποίες μπορεί να λειτουργήσουν είτε ως είσοδοι είτε ως έξοδοι. Αυτές τις εισόδους ή εξόδους μπορούμε να τις διαχειριστούμε γράφοντας κώδικα στο περιβάλλον του Scratch2.0 (**με εγκαταστημένη την επέκταση s2aio**).
Αυτό που θα χρειαστούμε για αρχή για τους πειραματισμούς μας είναι:

    • μια μονάδα, όπως είναι το Arduino Uno το οποίο με 14 ψηφιακές εισόδους/εξόδους και 6 αναλογικές εισόδους (Pins) είναι υπεραρκετό για τις πρώτες μας εφαρμογές (και το αντίστοιχο usb καλώδιο για να συνδεθεί στον υπολογιστή σας),

    • καλώδια για να συνδέουμε τα pins με ότι διαχειριζόμαστε,

    • μια βάση όπου θα κατασκευάζουμε τα κυκλώματά μας (breadboard) και τέλος

    • μερικά leds, αντιστάσεις, πυκνωτές, ποτενσιόμετρα, αισθητήρες κτλ για τις πρώτες μας υλοποιήσεις.


### Πηγές ενέργειας για το Arduino

Το Arduino μπορεί να δουλέψει με παροχή από τη USB θύρα του υπολογιστή μας ή με αυτόνομη παροχή από μπαταρία. Για παροχή ηλεκτρικής ενέργειας στη μονάδα από εξωτερική πηγή δέχεται τροφοδοσία από εξωτερικό βύσμα (συνιστώμενη παρεχόμενη τάση λειτουργίας είναι στα 7V έως 12V), ώστε να μπορεί να λειτουργήσει και να δώσει σταθερά τα 5V στην έξοδο (like http://arduino.cc/en/Main/arduinoBoardUno).
Μπορούμε να συνδέσουμε την πηγή απευθείας στα pins που προορίζονται για αυτό το σκοπό: (+) στο Pin VCC IN και (-) στο Gnd δίπλα του.
Στην περίπτωση που είναι συνδεδεμένη η μονάδα μας μόνιμα με θύρα USB τότε δουλεύει χωρίς πρόβλημα με τα 5V που παρέχει η USB θύρα.

### Ακίδες εισόδου/εξόδου (Pins) του Arduino

![Github Robuino](/images/5.png)

Το Arduino Uno R3 έχει 14 ψηφιακές θύρες εισόδου ή εξόδου (digital input/outpit pins) και έξι αναλογικές εισόδους (analog input pins). Οι 14 ψηφιακές θύρες ονομάζονται με αντίστοιχους αριθμούς από το 0 έως το 13, ενώ οι έξι αναλογικές με το γράμμα Α ακολουθούμενο από ένα αριθμό από το 0 μέχρι το 5 (π.χ. Α3). Στην έξοδο τα pins μπορούν να δώσουν 0 έως και 5V τάση. Από τις 14 ψηφιακές θύρες οι έξι, και ειδικότερα οι 3, 5, 6, 9, 10, 11, είναι και PWM θύρες (Pulse Width Modulation), δηλαδή μπορούν να προσομοιώσουν αναλογικές εξόδους.
Έτσι, συνοπτικά για την είσοδο και έξοδο έχουμε:

    • Για ψηφιακή είσοδο, χρησιμοποιούμε τις 14 ψηφιακές 0..13. Όταν δουλεύουν ψηφιακά, η είσοδος μπορεί να είναι ή 0 ή 5V, με τον χαρακτηρισμό 0 ή 1.

    • Για ψηφιακή έξοδο, χρησιμοποιούμε τις 14 ψηφιακές από 0..13. Όταν δουλεύουν ψηφιακά, η έξοδος μπορεί να είναι 0 ή 5V, με τον χαρακτηρισμό 0 ή 1.

    • Για αναλογική είσοδο, δηλαδή να διαβάσουμε τιμές δυναμικού στο διάστημα 0 έως 5V, χρησιμοποιούμε τις έξι αναλογικές θύρες A0..A5.

    • Για αναλογική έξοδο, μπορούμε να χρησιμοποιήσουμε τις έξι PWM ψηφιακές θύρες (3, 5, 6, 9, 10, 11), οι οποίες θα μας δώσουν δυναμικό εξόδου όποιας τιμής θέλουμε στο διάστημα από 0 έως 5V.

### Η επέκταση s2aio για το Scratch2.0

Η **επέκταση s2aio** παρέχει δέκα προσαρμοσμένα μπλοκ (εντολές) προγραμματισμού.
Τα μπλοκ αυτά βρίσκονται στην καρτέλα **“Άλλες Εντολές”**, όπως εικονίζονται παρακάτω.
![Github Robuino](/images/6.png)
Όπως αναφέρθηκε, η κύρια λειτουργία του μικροελεγκτή του Arduino βασίζεται στο να ελέγχει τις ακίδες που διαθέτει και είτε να δίνει ρεύμα (έξοδοι) είτε να παίρνει ρεύμα από αυτές (είσοδοι). Στην αρχή κάθε προγράμματός μας θα χρειαστεί να χαρακτηρίζουμε τα Pins που θα χρησιμοποιούμε ως εισόδους ή ως εξόδους.

Για να μπορέσουμε να δώσουμε ρεύμα προς τα έξω μέσω μιας ακίδας (pin) θα πρέπει πρώτα να έχει αυτή οριστεί ως εξόδου, όπως είδαμε στην προηγούμενη παράγραφο. Ακολούθως, με χρήση της κατάλληλης εντολής μπορούμε να δώσουμε κάθε φορά το επιθυμητό δυναμικό προς τα έξω.

Αντίστοιχα, για να **“διαβάσουμε”** από μια είσοδο, θα πρέπει αρχικά να την ορίσουμε ως είσοδο και με χρήση του κατάλληλου μπλοκ (**εντολής**) να διαβάζουμε την αντίστοιχη τιμή.

### Οι εντολές της επέκτασης s2aio

#### Εντολή για τη ρύθμιση ψηφιακού ακροδέκτη (pin)

Αυτό το μπλοκ (εντολή) διαμορφώνει έναν ψηφιακό ακροδέκτη για να λειτουργεί είτε σαν ψηφιακή είσοδος, είτε σαν  ψηφιακή έξοδος.
![Github Robuino](/images/7.png)
Εισάγουμε τον αριθμό του  PIN  του οποίου τη λειτουργία θέλουμε να ρυθμίσουμε και στην αναπτυσσόμενη λίστα στη δεξιά πλευρά του μπλοκ επιλέγουμε την επιθυμητή λειτουργία από τις παρακάτω:

![Github Robuino](/images/8.png)


Λειτουργία   | Τύπος λειτουργίας 
------------ | -------------
Είσοδο | Είσοδος
Έξοδο  | Έξοδος
PWM    | Έξοδος
Σέρβο  | Έξοδος
Tόνος  | Έξοδος
Σόναρ  | Είσοδος

Όπως έχει αναφερθεί παραπάνω για να χρησιμοποιήσετε Τόνο ή Σόναρ, το **FirmataPlus** πρέπει να μεταφορτωθεί στο **Arduino**. 

Στην αριστερή πλευρά του μπλοκ υπάρχει μια πτυσσόμενη λίστα **Ενεργοποίηση / απενεργοποίηση**.

![Github Robuino](/images/9.png)

Αυτές οι τιμές ισχύουν μόνο για τις λειτουργίες τύπου **εισόδου**. Εάν είναι ενεργοποιημένη (η προεπιλογή), θα μπορούμε να έχουμε αλλαγές δεδομένων στον αντίστοιχο ακροδέκτη. Εάν είναι **απενεργοποιημένη**, δεν θα εμφανιστούν αλλαγές για τον ακροδέκτη (PIN) στο ψηφιακό μπλοκ ανάγνωσης.


![Github Robuino](/images/10.png)


Εάν ο ακροδέκτης έχει ρυθμιστεί για **είσοδο σόναρ**, οι τιμές των δεδομένων ανακτώνται χρησιμοποιώντας το μπλοκ που φαίνεται παραπάνω, της ψηφιακής ανάγνωσης.

**ΠΡΟΣΟΧΗ:** Οι ακίδες Arduino περιγράφονται στο επίπεδο υλικού ως μέλη μιας ομάδας 8 ακίδων. Η απενεργοποίηση ή η ενεργοποίηση ενός ακροδέκτη εισόδου θα επηρεάσει και τα οκτώ μέλη της ομάδας του pin.

**ΣΗΜΕΙΩΣΗ:** Η διαμόρφωση για λειτουργία Tone (Τόνος) και Servo (Σέρβο) μπορεί να επηρεάσει τη λειτουργία PWM. Ο τόνος θα επηρεάσει την έξοδο PWM στις ακίδες 3 και 11 (σε boards εκτός του Mega). Σε boards διαφορετικά από το Mega, η ρύθμιση  Σέρβο θα επηρεάσει τη λειτουργία PWM στις ακίδες 9 και 10. Στο Mega, μπορεί να επηρεάσει το PWM στις ακίδες 10 και 11.


### Εντολή για τη ρύθμιση αναλογικού ακροδέκτη εισόδου (pin: Α0, Α1, Α2, Α3, Α4, Α5)

To Arduino έχει όπως είδαμε, 6 αναλογικές εισόδους, οι οποίες χαρακτηρίζονται με τα σύμβολα A0, A1, A2, A3, A4, A5. Μπορούμε να συνδέσουμε την έξοδο κάποιου αναλογικού εξαρτήματος (π.χ. ένα ποτενσιόμετρο) ή αισθητήρα σε μια απ’ αυτές τις εισόδους του Arduino και να διαβάζουμε την τιμή της.
Με την παρακάτω εντολή ρυθμίζουμε μία από αυτές τις ακίδες (pins) για αναλογική πηγή εισόδου (ακίδες που επισημαίνονται με έναν δείκτη **'A'** στο Arduino ).

![Github Robuino](/images/11.png)

Εισαγάγουμε τον αριθμό της ακίδας (pin) χωρίς το γράμμα **'A'**, για παράδειγμα για να εισάγουμε τον ακροδέκτη A5, απλώς πληκτρολογούμε το 5.

Η πτυσσόμενη λίστα στην αριστερή πλευρά της εντολής μας επιτρέπει να επιλέξουμε ή όχι, να υπάρχει η δυνατότητα ώστε να διαβάζουμε τις μεταβολές δεδομένων με την εντολή: “**Διάβασε Αναλογική Είσοδο**”.

Εάν είναι ενεργοποιημένη η επιλογή, τότε μπορούμε να διαβάσουμε μία από τις ακίδες (pins) με την εντολή:

![Github Robuino](/images/12.png)


Εάν έχει επιλεγεί απενεργοποίηση, η εντολή **“Διάβασε Αναλογική Είσοδο”** θα εμφανίσει την τελευταία τιμή που λάβαμε πριν απενεργοποιηθεί.

Για τις αναλογικές ακίδες, σε αντίθεση με τις ψηφιακές ακίδες, η ενεργοποίηση / απενεργοποίηση είναι ειδική για τον καθορισμένο ακροδέκτη και όχι για μια ομάδα ακίδων. Η ενεργοποίηση ή η απενεργοποίηση επηρεάζει μόνο τον επιλεγμένο ακροδέκτη (pin) και κανένα άλλο.


	
### Εντολή για ψηφιακή εγγραφή

Αυτή η εντολή ρυθμίζει το δυναμικό σ’ ένα pin ψηφιακής εξόδου.

![Github Robuino](/images/13.png)


Εισάγουμε στον αριθμό pin π.χ. 12 και επιλέγουμε από την αναπτυσσόμενη λίστα στη δεξιά πλευρά είτε το μηδέν για έξοδο 0 Volts είτε το 1 για έξοδο 5Volts.


### Εντολή για αναλογική εγγραφή

Κάποια από τα 14 Pins του Arduino έχουν την ένδειξη ~, δηλαδή μπορούν να προσομοιώσουν την αναλογική έξοδο μέσω παλμοκωδικής διαμόρφωσης (PWM).

Έτσι, με τιμές από το 0 μέχρι το 255 προσομοιώνουμε (αναλογικά) το διάστημα από 0 έως 5V.

Με την εντολή ρυθμίζουμε έναν ακροδέκτη για έξοδο PWM.

![Github Robuino](/images/14.png)

Στη παραπάνω εντολή καταχωρίζουμε στον αριθμό **PIN**  (κάποιο από τους αριθμούς: 3, 5, 6, 9, 10, 11) και στην τιμή **VAL** βάζουμε ένα ακέραιο αριθμό από 0 έως 255.

Αν βάλουμε στο **VAL** τιμή 0 θα έχουμε στο αντίστοιχο pin 0 V, ενώ αν βάλλουμε τιμή 255 θα έχουμε έξοδο 5 V. Αν βάλλουμε κάποια άλλη ακέραια τιμή π.χ. 153 θα έχουμε στο pin μια έξοδο 3 V.

**ΠΡΟΣΟΧΗ:** Η ρύθμιση των ακίδων, εκτός από αυτόν τον ακροδέκτη, για λειτουργία Tone ή Servo μπορεί να επηρεάσει τη λειτουργία PWM. Ο τόνος θα επηρεάσει την έξοδο PWM στις ακίδες 3 και 11 (σε boards εκτός του Mega). Σε boards διαφορετικά από το Mega, η σερβο ρύθμιση θα επηρεάσει τη λειτουργία PWM στις ακίδες 9 και 10. Στο Mega, μπορεί να επηρεάσει το PWM στις ακίδες 10 και 11.


### Δραστηριότητες με εφαρμογή των παραπάνω εντολών της επέκτασης s2aio.

#### Χρήσιμα στοιχεία για τις Φωτοδιόδους στα κυκλώματά μας – Leds

Οι φωτοδίοδοι, ή τα leds όπως αλλιώς ονομάζονται, υπάρχουν σε διάφορα χρώματα και τάσεις λειτουργίας. Ανάλογα με την προβλεπόμενη τάση λειτουργίας του led πρέπει να χρησιμοποιήσουμε μαζί και την κατάλληλη αντίσταση, ώστε να αποφύγουμε κάποια καταστροφή από υπέρταση. Για να βρούμε την αντίσταση που χρειαζόμαστε αρκεί να θυμηθούμε τον τύπο:
       **R = (Vπ – Vλ ) / I       (Νόμος του Ohm)**

όπου **R** είναι η αντίσταση που χρειαζόμαστε, **Vπ** το παρεχόμενο δυναμικό 5V από τοArduino, **Vλ** η τάση λειτουργίας του led και I το ρεύμα λειτουργίας του led. Τυπικά, μια αντίσταση γύρω στα 220 Ω καλύπτει τα περισσότερα led που χρησιμοποιούμε.


![Github Robuino](/images/15.png)

**Leds σε διάφορα χρώματα**

Επίσης, τα leds έχουν πολικότητα, δηλαδή λειτουργούν μόνο αν συνδεθούν σωστά, δηλαδή ο ακροδέκτης με το μεγαλύτερο μήκος (Άνοδος) στο (+) και αυτός με το μικρότερο μήκος (κάθοδος) στο (-). Επίσης, το led από την κάθοδο(–) είναι συνήθως επίπεδο κι όχι στρογγυλό όπως είναι από την άνοδο (+). 

#### Πλακέτα διασύνδεσης χωρίς κολλήσεις (solderless breadboard)

**Tι το ιδιαίτερο έχει μια Πλακέτα διασύνδεσης χωρίς κολλήσεις (solderless breadboard);** Ότι μπορούμε να αναπτύξουμε πάνω της κάποιο κύκλωμα και πριν το αποτυπώσουμε σε μόνιμη πλακέτα να δούμε αν λειτουργεί σωστά αλλά και να μάθουμε τα εξαρτήματα και τη χρήση τους. 

Τα κυκλώματα που υλοποιούνται συνήθως περιλαμβάνουν αρκετά ηλεκτρονικά στοιχεία (φωτοδίοδοι / led, αναλογικοί ή ψηφιακοί αισθητήρες, αντιστάσεις, πυκνωτές κτλ.), οπότε κρίνεται αναγκαία η χρήση του breadboard για τη δημιουργία πρωτότυπων πειραματικών κυκλωμάτων, χωρίς τη χρήση κολλήσεων. Τα καλώδια και τα ηλεκτρονικά στοιχεία εισάγονται στις ειδικές οπές και βραχυκυκλώνονται κάθετα ώστε να διευκολύνεται η σύνδεση όλων των εξαρτημάτων ακόμη και χωρίς καλώδια. Στο ακριανό μέρος ενός breadboard διακρίνονται οι γραμμές «+» και «–» που είναι οριζόντια βραχυκυκλωμένες και συνήθως συνδέεται στο «+» τροφοδοσία από τα 5 Volts που διαθέτει το Arduino και στο «-» η γείωση από το GND του Arduino. 

Στην πρώτη εικόνα φαίνεται ένα τυπικό breadboard και στη δεύτερη πως διασυνδέονται οι οπές του.

![Github Robuino](/images/breadboard.jpg)     ![Github Robuino](/images/breadboard1.png)

#### Δραστηριότητα 1

Να συνδέσουμε ένα LED με την πλακέτα Arduino και να προγραμματίσουμε τον μικροελεγκτή ώστε να αναβοσβήνει το LED ανά ένα δευτερόλεπτο.

Υλικά που θα χρειαστούμε:

    •  1 Arduino UNO

    •  1 Breadboard

    •  1 LED Κόκκινο

    •  1 αντίσταση 220 Ohm


**Το κύκλωμα σε breadboard**

![Github Robuino](/images/16.png)

**Ερώτηση: Γιατί χρησιμοποιήσαμε αντίσταση 220 ohms στο κύκλωμα;**

**Απάντηση:**

Το LED που χρησιμοποιήσαμε μπορεί να αντέξει ρεύμα μέχρι 20mA. Στα 20mA μας δίνει τη μέγιστη φωτεινότητά του. Από τον νόμο του Ohm γνωρίζουμε ότι I = V / R.

Η τάση 5V αφορά και τα δύο εξαρτήματα - μοιράζεται και στα δύο εξαρτήματα, το led και την αντίσταση.

**α)** Ξέρουμε ότι για ρεύμα περίπου 20mA ένα μεγάλο led έχει τάση 2.0 Volts και λειτουργεί με ασφάλεια.

Άρα τα 2V από τα 5V πηγαίνουν στο μεγάλο led και τα 3V στην αντίσταση.

Η αντίσταση για μεγάλο led και ρεύμα 20mA θα βγει από τον νόμο του Ohm: R=3/0.02=150 Ω

Επειδή συνήθως στην αγορά πουλάνε αντιστάσεις 100, 220, 330 ohms, επιλέξαμε αντίσταση 220 ohms. Επίσης επιλέξαμε μεγαλύτερη αντίσταση και για λόγους ασφαλείας, σε περίπτωση που συνδέσουμε κάποιο LED με λίγο διαφορετικές προδιαγραφές (π.χ. απαιτεί λιγότερο ρεύμα).

**β)** Ξέρουμε ότι σε ρεύμα περίπου 15mA ένα μικρό led έχει τάση 1.5 Volts και λειτουργεί με ασφάλεια.
Τα 1.5V από τα 5V πηγαίνουν στο μικρό led και τα 3.5V στην αντίσταση.

Η αντίσταση για μικρό led και ρεύμα 15mA θα βγει από τον νόμο του Ohm : R=3.5/0.015=233 Ω που δεν υπάρχει άρα στρογγυλεύεται προς τα πάνω στα 250 Ω.


**Το σενάριο στο Scratch με την επέκταση s2aio  είναι:**

![Github Robuino](/images/17.png)

### Δραστηριότητα 2

Στην δραστηριότητα αυτή θα χρησιμοποιήσουμε ένα LED το οποίο θα ανάβει σταδιακά και όταν θα φτάνει στη μέγιστη φωτεινότητά του θα αρχίσει να σβήνει σταδιακά. Η διαδικασία αυτή θα επαναλαμβάνεται συνεχώς.

Υλικά που θα χρειαστούμε:

    • 1 Arduino UNO

    • 1 Breadboard

    • 1 LED Κόκκινο

    • 1 αντίσταση 220 Ohm

**Το κύκλωμα σε breadboard** είναι το ίδιο με αυτό της **Δραστηριότητας 1**

Το σενάριο στο Scratch με την επέκταση s2aio είναι:

![Github Robuino](/images/19.png)

### Διαιρέτης τάσης

Ο διαιρέτης τάσης είναι ένα από τα πιο θεμελιώδη ηλεκτρικά/ηλεκτρονικά κυκλώματα και έχει πολλές εφαρμογές. Είναι βασικό να γνωρίζουμε τη λειτουργία του, τον μαθηματικό τύπο που τον διέπει, καθώς και να τον αναγνωρίζουμε όταν υπάρχει σε ένα κύκλωμα.

![Github Robuino](/images/20.png)

Στη διπλανή εικόνα βλέπουμε το κύκλωμα ενός διαιρέτη τάσης το οποίο αποτελείται από δύο αντιστάσεις R1 και R2 και μπορεί να μας δώσει μια τάση εξόδου Vout η οποία είναι ένα κλάσμα της τάσης εισόδου Vin .

Πιο συγκεκριμένα, η τάση εξόδου μπορεί (ανάλογα με τις τιμές των αντιστάσεων που έχουμε επιλέξει) να πάρει τιμές από 0 έως Vin. Δεν μπορεί δηλαδή να είναι μεγαλύτερη από την τάση εισόδου.

Ο μαθηματικός τύπος που δίνει την τάση εξόδου συναρτήσει της τάσης εισόδου είναι:

![Github Robuino](/images/20a.png)

Μερικές ενδιαφέρουσες παρατηρήσεις:

    • Η τάση εξόδου μπορεί να γίνει ίση αλλά όχι μεγαλύτερη από την τάση εισόδου.

    • Η τιμή της τάσης εξόδου δεν εξαρτάται από την απόλυτη τιμή των αντιστάσεων αλλά από την αναλογία τους. Δηλαδή το ζεύγος αντιστάσεων R1=1,2 KΩ, R2=2,4 KΩ δίνουν την ίδια τάση εξόδου με τα ζεύγος  R1=120 Ω, R2=240 Ω και με το ζεύγος R1=100 Ω, R2=200 Ω. Και στις τρεις περιπτώσεις η R2 είναι διπλάσια της R1. 

    • Αν οι δύο αντιστάσεις έχουν ίδια τιμή τότε η Vout είναι ακριβώς η μισή της

    • Όσο η R1 τείνει προς το μηδέν τότε Vout τείνει προς Vin

    • Όσο η R2 τείνει προς το μηδέν τότε Vout τείνει προς 0

    • Από τα παραπάνω προκύπτει ότι όταν θέλουμε την τάση εξόδου να είναι πάνω από το μισό της τάσης εισόδου, πρέπει η R1 να είναι μικρότερη της R2. Το αντίστροφο αν θέλουμε η τάση εξόδου να είναι κάτω από το μισό της εισόδου.

    • Το κύκλωμα διαρρέεται συνεχώς από ρεύμα που δίνεται από τον τύπο.
    
![Github Robuino](/images/20b.png)


Οπότε επιλέγουμε αντιστάσεις μεγάλης τιμής ώστε να περιορίσουμε το ρεύμα.
 
 
### Ποτενσιόμετρο
Εσωτερικά ο μηχανισμός του ποτενσιόμετρου μοιάζει όπως στο σχήμα.

![Github Robuino](/images/21.png)


Η καφέ λωρίδα σε σχήμα πετάλου είναι φτιαγμένη από ειδικό σύρμα υψηλής αντίστασης. Περιστρέφοντας τον άξονα μπορούμε να μετακινήσουμε τη θέση του δρομέα (απεικονίζεται με κίτρινο χρώμα) πάνω στο σύρμα. Καθώς η αντίσταση είναι ανάλογη με το μήκος του σύρματος, όταν ο δρομέας βρίσκεται ακριβώς στη μέση, το αριστερό τμήμα έχει το ίδιο μήκος και συνεπώς την ίδια αντίσταση με το δεξί. Όταν ο δρομέας μετακινείται αριστερόστροφα τότε η αντίσταση του αριστερού τμήματος του σύρματος γίνεται μικρότερη ενώ του δεξιού μεγαλύτερη. Το αντίστροφο συμβαίνει όταν κινείται ο δρομέας δεξιόστροφα.

Η συνολική αντίσταση του ποτενσιόμετρου παραμένει αμετάβλητη ανεξάρτητα από τη θέση στην οποία βρίσκεται ο δρομέας. Έτσι, το ρεύμα που το διαρρέει παραμένει πρακτικά σταθερό.

Η αντιστοιχία με το διαιρέτη τάσης είναι προφανής. Στους δύο εξωτερικούς ακροδέκτες συνδέουμε την τάση εισόδου και τη γείωση, ενώ από τον μεσαίο ακροδέκτη παίρνουμε την τάση εξόδου. Συνηθίζεται να συνδέουμε τη γείωση στον πρώτο ακροδέκτη έτσι ώστε η τάση εξόδου να είναι μηδέν όταν το ποτενσιόμετρο βρίσκεται στο αριστερό άκρο και να αυξάνεται καθώς το περιστρέφουμε δεξιόστροφα, μέχρι να γίνει ίση με την τάση εισόδου στο δεξί άκρο.

### Δραστηριότητα 3

Στην άσκηση αυτή θα χρησιμοποιήσουμε ένα LED το οποίο θα ανάβει σταδιακά και θα σβήνει σταδιακά με τη περιστροφή ενός ποτενσιόμετρου.

Υλικά που θα χρειαστούμε:

    • 1 Arduino UNO

    • 1 Breadboard

    • 1 LED Κόκκινο

    • 1 αντίσταση 220 Ohm

    • 1 ποτενσιόμετρο

    • καλώδια
    
**Το κύκλωμα σε breadboard**

![Github Robuino](/images/22.jpg)


Το σενάριο στο Scratch με την επέκταση s2aio είναι:

![Github Robuino](/images/23.png)

Στο παραπάνω σενάριο έχουμε τις παρακάτω ενέργειες να επαναλαμβάνονται για πάντα:
-- στη μεταβλητή "ποτενσιόμετρο" εκχωρείται η τιμή που διαβάζεται στην **αναλογική είσοδο Α0** από το ποτενσιόμετρο
-- τη τιμή αυτή τη λέει η γάτα (ή όποια άλλη μορφή χρησιμοποιούμε)
-- Μετασχηματίζει την τιμή που διάβασε από το ποτενσιόμετρο (τιμή από 0 μέχρι 1023) σε ανάλογη ακέραια τιμή στο διάστημα από 0 έως 255. Την τιμή αυτή την εκχωρεί στη μεταβλητή "pwd"
-- Η τιμή της μεταβλητής "pwd" εγγράφεται στη **PWM (αναλογική) έξοδο 3** του Arduino που έχουμε συνδέσει το led ώστε η φωτεινότητά του να  μεταβάλλεται  σε κάθε μεταβολή του  ποτενσιομέτρου.


### Δραστηριότητα 4

Να τοποθετήσετε στο μέσο της κάτω πλευράς της σκηνής του scratch ένα αεροπλάνο το οποίο θα κινείτε δεξιά και αριστερά με αντίστοιχη περιστροφή του κουμπιού του ποτενσιομέτρου. Όταν το ποτενσιόμετρο είναι στη μέση το αεροπλάνο θα τοποθετείται στο μέσο της κάτω πλευράς της σκηνής (όπως φαίνεται στην παρακάτω εικόνα). Αν το ποτενσιόμετρο περιστραφεί πλήρως αριστερά  τότε το αεροπλάνο φτάνει στην αριστερή άκρη της σκηνής, ενώ αν περιστραφεί πλήρως δεξιά θα πρέπει να φτάνει στη δεξιά άκρη της σκηνής.

![Github Robuino](/images/23b.png)

![Github Robuino](/images/23e.png)

Το σενάριο του αεροπλάνου:

![Github Robuino](/images/23d.png)

Στο παραπάνω σενάριο γίνεται η χρήση δύο μεταβλητών. Η μία μεταβλητή έχει όνομα **“ποτενσιόμετρο”** στην οποία εκχωρείται η τιμή που διαβάζεται από την **αναλογική είσοδο Α2** και αντιστοιχεί στην τιμή του ποτενσιόμετρου. Η τιμή στο μέσο της διαδρομής (2,5 V) αντιστοιχεί στον ακέραιο αριθμό 512 (οι τιμές ως γνωστό βρίσκονται στο διάστημα από 0 (αντιστοιχεί σε δυναμικό 0 V) έως 1023 (αντιστοιχεί σε δυναμικό 5V)). Η άλλη μεταβλητή με όνομα χ έχει τιμές που δείχνουν τη θέση του αεροπλάνου στη σκηνή. **Η τιμή του χ προκύπτει από τη θέση του ποτενσιόμετρου με μετασχηματισμό**. Όταν το ποτενσιόμετρο είναι στο ένα άκρο (στην αναλογική είσοδο Α2 διαβάζεται τιμή 0), τότε το χ θα έχει τιμή -240 ώστε το αεροπλάνο να είναι στην αριστερή άκρη της σκηνής, ενώ όταν το ποτενσιόμετρο είναι στο άλλο άκρο (στην αναλογική είσοδο Α2 διαβάζεται τιμή 1023), η τιμή που θα έχει το χ θα πρέπει να είναι 240 και το αεροπλάνο να τοποθετείται στη δεξιά άκρη της σκηνής. Στη μέση του ποτενσιόμετρου το χ θα έχει τιμή 0, δηλαδή το αεροπλάνο θα τοποθετείται στη μέση της οριζόντιας διάστασης της σκηνής.

**Ανάλυση της αντιστοίχισης των τιμών του ποτενσιόμετρου και της τετμημένης χ του αεροπλάνου**

Παρακάτω σχηματίζουμε δύο ευθείες  στις οποίες έχουμε αντίστοιχα τα εξής:

 -- στη πρώτη ευθεία απεικονίζουμε τις τιμές που παίρνει το ποτενσιόμετρο (από 0 έως 1023). Το κόκκινο βέλος δείχνει μία τιμή “ποτενσιόμετρο” που αντιστοιχεί σε μια τυχαία θέση του ποτενσιόμετρου.

-- στη δεύτερη ευθεία απεικονίζουμε τις τιμές που θα έχει η τετμημένη του “my-plane” (αεροπλάνου μας). Όταν το ποτενσιόμετρο έχει τη τιμή “ποτενσιόμετρο” τότε η τετμημένη χ θα έχει ανάλογη τιμή που δείχνεται με το μπλε βέλος.

![Github Robuino](/images/met1.png)

Οι δύο ευθείες τοποθετήθηκαν παράλληλα και όπως αναφέρθηκε αντίστοιχα έχουμε: 

-- όταν το ποτενσιόμετρο έχει περιστραφεί στο αριστερό άκρο (στην αναλογική είσοδο Α2 διαβάζεται τιμή 0), το χ θα έχει τιμή -240 ώστε το αεροπλάνο να είναι στην αριστερή άκρη της σκηνής,

-- όταν το ποτενσιόμετρο έχει στραφεί στο δεξί άκρο (στην αναλογική είσοδο Α2 διαβάζεται τιμή 1023) η τιμή που θα έχει το χ θα πρέπει να είναι 240 και το αεροπλάνο να τοποθετείται στη δεξιά άκρη της σκηνής. 

-- Στη μέση του ποτενσιόμετρου το χ θα έχει τιμή 0, δηλαδή το αεροπλάνο θα τοποθετείται στη μέση της οριζόντιας διάστασης της σκηνής. 


**1η Περίπτωση: Όταν η τιμή του ποτενσιόμετρου είναι από 0 έως 512**

Έστω ότι το ποτενσιόμετρο έχει περιστραφεί αριστερά και έχει τιμή “ποτενσιόμετρο”. H “μεταβολή” από την μεσαία (κεντρική) θέση του (όπως φαίνεται και στο παραπάνω σχήμα) είναι:

**μεταβολή = 511 – ποτενσιόμετρου**

 ενώ η αντίστοιχη μεταβολή κατ’ απόλυτη τιμή στη τετμημένη του αεροπλάνου είναι χ.

![Github Robuino](/images/met1b.png)

**2η Περίπτωση: Όταν η τιμή που έχει το ποτενσιόμετρο είναι από 512 έως 1023**

Έστω ότι το ποτενσιόμετρο έχει περιστραφεί αριστερά και έχει τιμή “ποτενσιόμετρο” η “μεταβολή” από την μεσαία (κεντρική) θέση του (όπως φαίνεται και στο σχήμα) είναι:

**μεταβολή = ποτενσιόμετρο -  512**

![Github Robuino](/images/met2.png)

Τα παραπάνω περιλαμβάνονται στο σενάριο του αεροπλάνου μέσα στην εντολή **“για πάντα”**και ορίζουν την τιμή της τετμημένης χ του αεροπλάνου  σε κάθε περίπτωση.

## Σόναρ - Μέτρηση απόστασης - Ανίχνευση κίνησης
Μια πολύ ενδιαφέρουσα συσκευή που μπορεί να χρησιμοποιηθεί για να μετρήσουμε απόσταση είναι το "Sonar". θα χρησιμοποιήσουμε τον υπερηχητικό αισθητήρα HC-SR04.

![Github Robuino](/images/24.jpg)

Αυτή η συσκευή μιμείται ότι κάνουν οι νυχτερίδες. Εκπέμπουν έναν υπερηχητικό παλμό και μετράνε το χρόνο για να ληφθεί μια ηχώ. Έχοντας το χρόνο που χρειάζεται ο υπέρηχος από την ώρα που εκπέμπεται μέχρι να επιστρέψει πίσω στον αισθητήρα και γνωρίζοντας την ταχύτητα του ήχου (340 m/s), μπορούμε να υπολογίσουμε την απόσταση μεταξύ του αισθητήρα και του εμποδίου.

Αυτός ο αισθητήρας παρέχει λειτουργίες μέτρησης χωρίς επαφή από 2cm έως 400cm με ακρίβεια μέτρησης που μπορεί να φτάσει έως και 3mm. Κάθε μονάδα HC-SR04 περιλαμβάνει έναν πομπό υπερήχων, έναν δέκτη και ένα κύκλωμα ελέγχου.

Το HC-SR04 διαθέτει 4 ακίδες:


    •  VCC (Power),

    •  Trig (Trigger – Πομπός),

    •  Echo (Receive - Δέκτης), και

    • GND (Γείωση).



### Η συνδεσμολογία και οι εντολές για το Σόναρ με το Scratch 2.0 (s2aio)

Στην επέκταση s2aio υπάρχει η εντολή που ενεργοποιούμε pin (π.χ. το pin 12) για  είσοδο από Σόναρ:

![Github Robuino](/images/25.jpg)

ενώ στη συνδεσμολογία του αισθητήρα θα πρέπει οι ακροδέκτες (pins) Trig και Echo να βραχυκυκλωθούν όπως εικονίζεται παρακάτω  και να συνδεθούν στη ψηφιακή είσοδο 12 του Arduino. 

![Github Robuino](/images/26.png)

Τα δεδομένα του "Sonar" διαβάζονται χρησιμοποιώντας την εντολή “Διάβασε Ψηφιακή είσοδο στο pin”: 

![Github Robuino](/images/27.jpg)


(όπου PIN βάζουμε π.χ. 12, δηλαδή την είσοδο από το Σόναρ) 

Η τιμή που διαβάζουμε μας δίνει την απόσταση (σε cm) που βρίσκεται το εμπόδιο από το Σόναρ την οποία μπορούμε να μεταβιβάσουμε σε μια μεταβλητή.


### Η συνδεσμολογία και οι εντολές για το buzzer με το Scratch (s2aio)

Παρακάτω θα χρησιμοποιήσουμε ένα μικρό μονοτονικό ηχείο, κοινώς **buzzer / piezo speaker**, σε σύνδεση με το Arduino για να παράγουμε ήχους. Τέτοια ηχεία συναντάμε σε υπολογιστές, ξυπνητήρια, σε συστήματα συναγερμού ακόμα και στα πληκτρολόγια των ATMs.

![Github Robuino](/images/28.png)

Παραπάνω εικονίζεται η συνδεσμολογία ενός buzzer / piezo speaker με το Αrduino. Παρατηρούμε ότι ενώ ο ένας ακροδέκτης του είναι συνδεδεμένος στη γη ο άλλος είναι συνδεδεμένος με ένα PIN εξόδου του Arduino (στην εικόνα pin 8).

Για να παίξει έναν ήχο θα πρέπει πρώτα να ενεργοποιηθεί το αντίστοιχο PIN για λειτουργία τόνου με την εντολή:

![Github Robuino](/images/29.png)

Για να παίξουμε ένα τόνο με καθορισμένη συχνότητα και διάρκεια χρησιμοποιούμε την εντολή:

![Github Robuino](/images/30.png)

Η είσοδος σε μηδενική διάρκεια θα αφήσει τον ήχο ενεργοποιημένο. Χρησιμοποιούμε την εντολή χωρίς τόνο για να το απενεργοποιήσουμε.

Η εντολή:

![Github Robuino](/images/31.png)

θα σταματήσει την παραγωγή ήχου στην επιλεγμένη ακίδα (PIN). Συνήθως χρησιμοποιείται είτε εάν η εντολή τόνου έχει οριστεί με μηδενική διάρκεια (συνεχές τόνο) ή έχει φτάσει το τέλος του προγράμματος και ο ήχος πρέπει να τερματιστεί.

### Δραστηριότητα 5

Να δημιουργήσετε ένα ανιχνευτή εμποδίων. Όσο το εμπόδιο είναι σε απόσταση από 0 έως 10 εκατοστά από τον ανιχνευτή και για όσο χρονικό διάστημα το εμπόδιο δεν απομακρύνεται πέρα από τα 10 εκατοστά θα ακούγετε ήχος ενώ παράλληλα θα ανάβει ένα κόκκινο led. Με την απομάκρυνση του εμποδίου μακρύτερα από τα δέκα εκατοστά, ο ήχος από το buzzer θα σταματά ενώ θα σβήνει και το κόκκινο led. Καθ’ όλη τη διάρκεια εκτέλεσης του προγράμματος θα εμφανίζεται η απόστασή του εμποδίου από τον αισθητήρα. Σε περίπτωση μη ύπαρξης  η απόσταση θα δείχνει 0.

Υλικά που θα χρειαστούμε:

    • 1 Arduino UNO

    • 1 Breadboard

    • 1 LED Κόκκινο
    
    • 1 αντίσταση 220 Ohm
    
    • 1 buzzer

    • καλώδια

**Το κύκλωμα:**

![Github Robuino](/images/32.png)

Παρακάτω παραθέτουμε το σενάριο που επισυνάπτουμε σε κάποια μορφή (π.χ. ένα μαθητή) που θέλουμε ν’ αναφέρει την απόσταση από το εμπόδιο και να έχουμε το επιθυμητό αποτέλεσμα.

![Github Robuino](/images/33.png)

**Επέκταση:** Τροποποιήστε το παραπάνω πρόβλημα ώστε το Sonar παράλληλα να περιστρέφεται δεξιά αριστερά και να ελέγχει για το εν λόγω εμπόδιο.

### Σέρβος-Servos και η εντολή διαχείρισης σέρβος

Ένα άλλο εξάρτημα που μπορούμε να διαχειριστούμε μέσω του Arduino είναι το σέρβο.

![Github Robuino](/images/34.png)

Πρόκειται για μια διάταξη που μπορεί να γυρίζει έναν άξονα από τις 0 μέχρι τις 180 μοίρες. Η διάταξη αυτή έχει εφαρμογή σε κατασκευές που θέλουμε να κινείται κάποιο μέρος ελεγχόμενα. Αν σταθεροποιήσουμε κάπου τη βάση του, μπορούμε να χρησιμοποιήσουμε το σέρβο για να έχουμε περιστροφική κίνηση σε εύρος 180 μοιρών στην κατασκευή μας. Το σέρβο συνδέεται με ένα καλώδιο  στην τροφοδοσία του (πορτοκαλί), με ένα άλλο (καφέ) στη γείωση και ένα τρίτο (κίτρινο) σε ένα PIN του Arduino ώστε να του δίνουμε εντολή  για το πόσο να στρίψει.

![Github Robuino](/images/35.png)

### Δραστηριότητα 6
Για να υλοποιήσουμε την επέκταση της 5ης δραστηριότητας στερεώνουμε πάνω σ’ ένα servo το Sonar όπως φαίνεται στην εικόνα

![Github Robuino](/images/36.png)         ![Github Robuino](/images/37.png)


Στο Scratch 2.0 εισάγουμε δύο μορφές που φαίνονται στο παρακάτω παράθυρο:

![Github Robuino](/images/38.png)

Η μία μορφή (κορίτσι) ονομάζεται “απόσταση” και η άλλη “servo” (αγόρι).
Δημιουργούμε δύο μεταβλητές μία με όνομα “απόσταση” και στην οποία εκχωρείται η απόσταση του εμποδίου ενώ η άλλη ονομάζεται “σέρβο” και εκχωρείται η γωνία περιστροφής του servo.
Παρακάτω εικονίζονται τα σενάρια που επισυνάπτουμε σε κάθε μια μορφή.

Για τη **μορφή "απόσταση"**   και για τη  **μορφή "servo"**αντίστοιχα


![Github Robuino](/images/39.png)         ![Github Robuino](/images/40.png)







 









